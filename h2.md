# h2 Soitto kotiin

## Tiivistelmät
### [Two Machine Virtual Network With Debian 11 Bullseye and Vagrant](https://terokarvinen.com/2021/two-machine-virtual-network-with-debian-11-bullseye-and-vagrant/)
- Asenna vagrant linuxilla:

      sudo apt-get update
      sudo apt-get install vagrant virtualbox
Windowsilla lataa installer

- Luo vagrantfile ja kopioi sisältö sivulta

      mkdir twohost/; cd twohost/
      nano Vagrantfile

- Kirjaudu sisään virtuaalikoneeseen ssh:lla ja kirjaudu ulos

      vagrant ssh t001
      exit

- Tuhoa virtuaalikone

      vagrant destroy

- Luo uusi

      vagrant up
  
### [Salt Quickstart – Salt Stack Master and Slave on Ubuntu Linux](https://terokarvinen.com/2018/salt-quickstart-salt-stack-master-and-slave-on-ubuntu-linuxfromSearch=salt%20quickstart%20salt%20stack%20master%20and%20slave%20on%20ubuntu%20linux)
- A slave must know where its master is
- Each slave must have a unique id
- to enable new configuration, restart minion
### [Salt Vagrant - automatically provision one master and two slaves](https://terokarvinen.com/2023/salt-vagrant/#infra-as-code---your-wishes-as-a-text-file)
- Asenna virtualisointi ympäristö

      sudo apt-get update
      sudo apt-get -y install virtualbox vagrant micro

      mkdir saltdemo; cd saltdemo
      micro Vagrantfile

- Kopioi valmiiksi tehty vagrantfile sivulta

- Käynnistä koneet

      vagrant up

- ota ssh yhteys masteriin ja hyväksy avaimet

      vagrant ssh tmaster
      sudo salt-key -A

- Testaa yhteys

      sudo salt '*' test.ping

- Aja komentoja

      sudo salt '*' cmd.run 'hostname -I'


## a
![kuva](https://github.com/user-attachments/assets/89db7d4e-e320-4d3b-8e89-4f4b56943d06)

## b 
![kuva](https://github.com/user-attachments/assets/bf1a6cd5-27dc-48eb-8984-b506e8282d92)

En saanut Vagrantia avaamaan virtuaalikonetta läppärillä. Joten vaihdoin pöytäkoneelle ja sain vagrantin toimimaan.

![kuva](https://github.com/user-attachments/assets/05716d94-c2e5-4d11-9f6a-20e8bc42e7d6)

![kuva](https://github.com/user-attachments/assets/78035d38-6bc2-4955-b2be-0eb095ce27fa)

## c 
Tehdäkseni kaksi linux tietokonetta vagrantilla, muokkasin Vagrantfilen samaksi kuin [ohjeessa](https://terokarvinen.com/2021/two-machine-virtual-network-with-debian-11-bullseye-and-vagrant/)

Kun suoritn komennon "vagrant up" aukesi kaksi virtuaalikonetta ja ne pystyvät pingata toisiaan.

![kuva](https://github.com/user-attachments/assets/94fdebc8-eafc-4376-8b00-da04fd6a80be)

![kuva](https://github.com/user-attachments/assets/e72f7161-c857-4cdd-b055-1a2886a0ba29)


## d 
En saanut salt-masteria asennettua, myöskään asennettuani salt repositorion

![kuva](https://github.com/user-attachments/assets/36b505f7-e903-4b66-9dd4-806e62bf3d1e)



## e


## Lähteet

Tehtävänanto: https://terokarvinen.com/palvelinten-hallinta/#esitiedot

Karvinen, Tero 2021: Two Machine Virtual Network With Debian 11 Bullseye and Vagrant. https://terokarvinen.com/2021/two-machine-virtual-network-with-debian-11-bullseye-and-vagrant/

Karvinen, Tero 2018: https://terokarvinen.com/2018/salt-quickstart-salt-stack-master-and-slave-on-ubuntu-linux/?fromSearch=salt%20quickstart%20salt%20stack%20master%20and%20slave%20on%20ubuntu%20linux

Karvinen, Tero 2023: https://terokarvinen.com/2023/salt-vagrant/#infra-as-code---your-wishes-as-a-text-file

